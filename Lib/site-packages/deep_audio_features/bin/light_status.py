from tuya_connector import (
	TuyaOpenAPI,    
	TuyaOpenPulsar,
	TuyaCloudPulsarTopic,
)

#ts = time.time()

# Initiate connection to Tuya device
ACCESS_ID = "rhppxs9m9gxkprknfvx3"
ACCESS_KEY = "da9fa76c78dc4bd08564b0b048b8be79"
API_ENDPOINT = "https://openapi.tuyaus.com"
MQ_ENDPOINT = "wss://mqe.tuyaus.com:8285/"
BULB_MODEL_NAME = "LED BULB W509Z2"

# Init OpenAPI and connect
openapi = TuyaOpenAPI(API_ENDPOINT, ACCESS_ID, ACCESS_KEY)
openapi.connect()   

DEVICE_ID ="eb1aeabb37c62584f7ke0s"

response = openapi.get('/v1.0/iot-03/devices/{}/status'.format(DEVICE_ID))
status = next((item for item in response['result'] if item["code"] == "switch_led"), None)
switch_led_status = status['value']   
print(switch_led_status)
